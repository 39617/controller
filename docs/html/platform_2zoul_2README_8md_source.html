<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<title>Controller: E:/ISEL Projects/controller/contiki_multiple_interface/platform/zoul/README.md Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Controller
   </div>
   <div id="projectbrief">IOT Project</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">E:/ISEL Projects/controller/contiki_multiple_interface/platform/zoul/README.md</div>  </div>
</div><!--header-->
<div class="contents">
<a href="platform_2zoul_2README_8md.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;Zolertia Zoul core module</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;============================================</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;![Zolertia Zoul Module][zoul]</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;The Zoul is a core module developed by Zolertia to target most IoT applications,</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;providing a flexible and affordable module solution to integrate to most</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;existing products and solutions, or ease the prototyping and production of new</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;products in a short time.</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;The Zoul is based on TI&#39;s CC2538 system on chip (SoC), featuring an ARM</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;Cortex-M3 with 512KB flash, 32Kb RAM, double RF interface, and the following </div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;goodies:</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;* ISM 2.4-GHz IEEE 802.15.4 &amp; Zigbee compliant.</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;* ISM 868-, 915-, 920-, 950-MHz ISM/SRD Band.</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;* AES-128/256, SHA2 Hardware Encryption Engine.</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;* ECC-128/256, RSA Hardware Acceleration Engine for Secure Key Exchange.</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;* Small form-factor of 16.78 x 30.89 mm.</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;* Prototype friendly, to fit on most prototyping boards (breadboard, etc.).</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;* Self-contained and EMI-protected module under a shield.</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;The Zoul will be CE/FCC certified (2016) to allow a fast integration and short time to market for new products and solutions.</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;Zoul pin-out</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;=============</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;![Zoul pin-out (front)][zoul-pinout-front]</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;![Zoul pin-out (back)][zoul-pinout-back]</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;Port Features</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;=============</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;The Zoul has the following key features:</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160; * Deep Sleep support with RAM retention for ultra-low energy consumption.</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160; * Native USB support (CDC-ACM). SLIP over UART for border routers is no longer a bottleneck.</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160; * DMA transfers for increased performance (RAM to/from RF, RAM to/from USB).</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;In terms of hardware support, the following drivers have been implemented for the Zoul-based platforms:</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  * CC2538 System-on-Chip:</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    * Standard Cortex M3 peripherals (NVIC, SCB, SysTick)</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    * Sleep Timer (underpins rtimers)</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    * SysTick (underpins the platform clock and Contiki&#39;s timers infrastructure)</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    * RF (2.4GHz)</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    * UART</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    * Watchdog (in watchdog mode)</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    * USB (in CDC-ACM)</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    * uDMA Controller (RAM to/from USB and RAM to/from RF)</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    * Random number generator</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    * Low Power Modes</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    * General-Purpose Timers. NB: GPT0 is in use by the platform code, the remaining GPTs are available for application development.</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    * ADC</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    * Cryptoprocessor (AES-ECB/CBC/CTR/CBC-MAC/GCM/CCM-128/192/256, SHA-256)</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    * Public Key Accelerator (ECDH, ECDSA)</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    * Flash-based port of Coffee</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    * PWM</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    * LEDs</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    * Buttons</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    * Built-in core temperature and battery sensor.</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  * CC1200 sub-1GHz radio interface.</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  * Real Time Clock Calendar (on the RE-Mote platform).</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  * SD</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;There is a Zoul powering the RE-Mote and Firefly platforms, check out its specific README files for more information about on-board features.</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;Requirements</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;============</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;To start using Contiki, the following is required:</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160; * A zoul-based board (RE-Mote, firefly)</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160; * A toolchain to compile Contiki for the CC2538.</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; * Drivers so that your OS can communicate with your hardware.</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; * Software to upload images to the CC2538.</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;Install a Toolchain</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;-------------------</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;The toolchain used to build contiki is arm-gcc, also used by other arm-based Contiki ports. If you are using Instant Contiki, you may have a version pre-installed in your system.</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;The platform is currently being used/tested with &quot;GNU Tools for ARM Embedded Processors&quot; (&lt;https://launchpad.net/gcc-arm-embedded&gt;).</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;Always check which version [Travis currently uses for the ARM regression testing](https://github.com/contiki-os/contiki/blob/master/.travis.yml#L54)</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;To find out which version your system has:</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    $ arm-none-eabi-gcc --version</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    arm-none-eabi-gcc (GNU Tools for ARM Embedded Processors) 5.2.1 20151202 (release) [ARM/embedded-5-branch revision 231848]</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    Copyright (C) 2015 Free Software Foundation, Inc.</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    This is free software; see the source for copying conditions.  There is NO</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;Drivers</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;-------</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;Depending on your Zoul flavour, there are different options.  As today the RE-Mote and Firefly platforms host a Zoul with a  CP2104 USB-to-serial converter, governed by a low-power PIC to handle resetting and flashing the Zoul over USB, without having to press any button or use external tools.</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;The driver is available at &lt;https://www.silabs.com/products/mcu/Pages/USBtoUARTBridgeVCPDrivers.aspx&gt;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;Check the board&#39;s specific README files for more information.</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;For windows users, if using the USB 2.0 interface (via CDC-ACM driver), there is an available driver in this folder:</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;`zolertia-zoul-cdc-acm`</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;Software to Program the Nodes</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;-----------------------------</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;The Zoul can be programmed via the jtag interface or via the serial boot loader on the chip.</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;Both the RE-Mote and Firefly has a mini JTAG 10-pin male header, compatible with the `SmartRF06` development board, which can be used to flash and debug the platforms.  Alternatively one could use the `JLink` programmer with a 20-to-10 pin converter like the following: &lt;https://www.olimex.com/Products/ARM/JTAG/ARM-JTAG-20-10/&gt;.</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;The serial boot loader on the chip is exposed to the user via an USB interface.  In the not so distant past we used to press a button sequence to unlock the boot loader, but now an on-board PIC in both RE-Motes and Fireflies handles this on its own, so it will detect the BSL sequence and flash the CC2538 without user intervention.</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;Instructions to flash for different OS are given below.</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;* On Windows:</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    * Nodes can be programmed with TI&#39;s ArmProgConsole or the [SmartRF Flash Programmer 2][smart-rf-flashprog]. The README should be self-explanatory. With ArmProgConsole, upload the file with a `.bin` extension. (jtag + serial)</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    * Nodes can also be programmed via the serial boot loader in the cc2538. In `tools/cc2538-bsl/` you can find `cc2538-bsl.py` this is a python script that can download firmware to your node via a serial connection. If you use this option you just need to make sure you have a working version of python installed. You can read the README in the same directory for more info. (serial)</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;* On Linux:</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    * Nodes can be programmed with TI&#39;s [UniFlash] tool. With UniFlash, use the file with `.elf` extension. (jtag + serial)</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    * Nodes can also be programmed via the serial boot loader in the cc2538. No extra software needs to be installed. (serial)</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;* On OSX:</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    * The `cc2538-bsl.py` script in `tools/cc2538-bsl/` is the only option. No extra software needs to be installed. (serial)</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;The file with a `.zoul` extension is a copy of the `.elf` file.</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;Use the Port</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;============</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;The following examples are intended to work off-the-shelf:</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;* Examples under `examples/zolertia/zoul`</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;* MQTT example `examples/cc2538dk/mqtt-demo`</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;* Border router: `examples/ipv6/rpl-border-router`</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;* Webserver: `examples/webserver-ipv6`</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;* CoAP example: `examples/er-rest-example/`</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;Build your First Examples</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;-------------------------</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;It is recommended to start with the `zoul-demo`, it is a simple example that walkthroughs the zoul features (can be compiled for both the RE-Mote and the Firefly), such as the built-in sensors, LEDs, user button operation modes (press, release, hold-press), radio (Rime broadcast).</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;The `Makefile.target` includes the `TARGET=` argument, predefining which is the target platform to compile for, it is automatically included at compilation.  The `BOARD=` argument is using as a glue switch to pull in specific platform files, for example the specific RE-Mote core drivers.  If no `BOARD` argument is given, it will default to `remote` and compile for the RE-Mote platform.</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;To generate or override an existing one, you can run:</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;`make TARGET=zoul savetarget`</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;Then you can just run `make` to compile an application, otherwise you will need to do `make TARGET=zoul`.</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;Alternatively you can export the following to your work environment:</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;`export BOARD=remote` or `export BOARD=firefly`</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;This will avoid having to type this argument at each compilation.</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;If you want to upload the compiled firmware to a node via the serial boot loader you need first to either manually enable the boot loader, or just let the Co-Processor detect the flash sequence and do it on your behalf, as simple as not pressing anything at all!</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;Then use `make zoul-demo.upload`. </div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;The `PORT` argument could be used to specify in which port the device is connected, in case we have multiple devices connected at the same time.</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;To generate an assembly listing of the compiled firmware, run `make zoul-demo.lst`. This may be useful for debugging or optimizing your application code. To intersperse the C source code within the assembly listing, you must instruct the compiler to include debugging information by adding `CFLAGS += -g` to the project Makefile and rebuild by running `make clean zoul-demo.lst`.</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;To enable printing debug output to your console, use the `make login` to get the information over the USB programming/debugging port, or alternatively use `make serialview` to also add a timestamp in each print.</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;Node IEEE/RIME/IPv6 Addresses</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;-----------------------------</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;Nodes will generally autoconfigure their IPv6 address based on their IEEE address. The IEEE address can be read directly from the CC2538 Info Page, or it can be hard-coded. Additionally, the user may specify a 2-byte value at build time, which will be used as the IEEE address&#39; 2 LSBs.</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;To configure the IEEE address source location (Info Page or hard-coded), use the `IEEE_ADDR_CONF_HARDCODED` define in contiki-conf.h:</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;* 0: Info Page</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;* 1: Hard-coded</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;If `IEEE_ADDR_CONF_HARDCODED` is defined as 1, the IEEE address will take its value from the `IEEE_ADDR_CONF_ADDRESS` define. If `IEEE_ADDR_CONF_HARDCODED` is defined as 0, the IEEE address can come from either the primary or secondary location in the Info Page. To use the secondary address, define `IEEE_ADDR_CONF_USE_SECONDARY_LOCATION` as 1.</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;Additionally, you can override the IEEE&#39;s 2 LSBs, by using the `NODEID` make variable. The value of `NODEID` will become the value of the `IEEE_ADDR_NODE_ID` pre-processor define. If `NODEID` is not defined, `IEEE_ADDR_NODE_ID` will not get defined either. For example:</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    make NODEID=0x79ab</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;This will result in the 2 last bytes of the IEEE address getting set to 0x79 0xAB</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;Note: Some early production devices do not have am IEEE address written on the Info Page. For those devices, using value 0 above will result in a Rime address of all 0xFFs. If your device is in this category, define `IEEE_ADDR_CONF_HARDCODED` to 1 and specify `NODEID` to differentiate between devices.</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;Low-Power Modes</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;---------------</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;The CC2538 port supports power modes for low energy consumption. The SoC will enter a low power mode as part of the main loop when there are no more events to service.</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;LPM support can be disabled in its entirety by setting `LPM_CONF_ENABLE` to 0 in `contiki-conf.h` or `project-conf.h`.</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;The Low-Power module uses a simple heuristic to determine the best power mode, depending on anticipated Deep Sleep duration and the state of various peripherals.</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;In a nutshell, the algorithm first answers the following questions:</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;* Is the RF off?</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;* Are all registered peripherals permitting PM1+?</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;* Is the Sleep Timer scheduled to fire an interrupt?</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;If the answer to any of the above question is &quot;No&quot;, the SoC will enter PM0. If the answer to all questions is &quot;Yes&quot;, the SoC will enter one of PMs 0/1/2 depending on the expected Deep Sleep duration and subject to user configuration and application requirements.</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;At runtime, the application may enable/disable some Power Modes by making calls to `lpm_set_max_pm()`. For example, to avoid PM2 an application could call `lpm_set_max_pm(1)`. Subsequently, to re-enable PM2 the application would call `lpm_set_max_pm(2)`.</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;The LPM module can be configured with a hard maximum permitted power mode.</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    #define LPM_CONF_MAX_PM        N</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;Where N corresponds to the PM number. Supported values are 0, 1, 2. PM3 is not supported. Thus, if the value of the define is 1, the SoC will only ever enter PMs 0 or 1 but never 2 and so on.</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;The configuration directive `LPM_CONF_MAX_PM` sets a hard upper boundary. For instance, if `LPM_CONF_MAX_PM` is defined as 1, calls to `lpm_set_max_pm()` can only enable/disable PM1. In this scenario, PM2 can not be enabled at runtime.</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;When setting `LPM_CONF_MAX_PM` to 0 or 1, the entire SRAM will be available. Crucially, when value 2 is used the linker will automatically stop using the SoC&#39;s SRAM non-retention area, resulting in a total available RAM of 16MB instead of 32MB.</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;### LPM and Duty Cycling Driver</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;LPM is highly related to the operations of the Radio Duty Cycling (RDC) driver of the Contiki network stack and will work correctly with ContikiMAC and NullRDC.</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;* With ContikiMAC, PMs 0/1/2 are supported subject to user configuration.</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;* When NullRDC is in use, the radio will be always on. As a result, the algorithm discussed above will always choose PM0 and will never attempt to drop to PM1/2.</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;### Shutdown Mode</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;The RE-Mote has a built-in shutdown mode which effectively reduces the power consumption down to 150nA.  Check its specific README file for more information.</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;Build headless nodes</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;--------------------</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;It is possible to turn off all character I/O for nodes not connected to a PC. Doing this will entirely disable the UART as well as the USB controller, preserving energy in the long term. The define used to achieve this is (1: Quiet, 0: Normal output):</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    #define CC2538_CONF_QUIET      0</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;Setting this define to 1 will automatically set the following to 0:</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;* `USB_SERIAL_CONF_ENABLE`</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;* `UART_CONF_ENABLE`</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;* `STARTUP_CONF_VERBOSE`</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;Code Size Optimisations</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;-----------------------</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;The build system currently uses optimization level `-Os`, which is controlled indirectly through the value of the `SMALL` make variable. This value can be overridden by example makefiles, or it can be changed directly in `platform/zoul/Makefile.zoul`.</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;Historically, the `-Os` flag has caused problems with some toolchains. If you are using one of the toolchains documented in this README, you should be able to use it without issues. If for whatever reason you do come across problems, try setting `SMALL=0` or replacing `-Os` with `-O2` in `cpu/cc2538/Makefile.cc2538`.</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;Doxygen Documentation</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;=====================</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;This port&#39;s code has been documented with doxygen. To build the documentation, navigate to `$(CONTIKI)/doc` and run `make`. This will build the entire contiki documentation and may take a while.</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;If you want to build this platform&#39;s documentation only and skip the remaining platforms, run this:</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    make basedirs=&quot;platform/zoul core cpu/cc2538 examples/zolertia/zoul examples/cc2538dk&quot;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;Once you&#39;ve built the docs, open `$(CONTIKI)/doc/html/index.html` and enjoy.</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;Other Versions of this Guide</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;============================</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;If you prefer this guide in other formats, use the excellent [pandoc] to convert it.</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;* **pdf**: `pandoc -s --toc README.md -o README.pdf`</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;* **html**: `pandoc -s --toc README.md -o README.html`</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;More Reading</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;============</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;1. [Zolertia website][zolertia-site]</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;2. [Zolertia Wiki page][zolertia-wiki]</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;3. [CC2538 System-on-Chip Solution][cc2538]</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;4. [CC1200 sub-1GHz RF transceiver][cc1200]</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;5. [Zolertia Hackster channel][hackster]</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;6. [IoT in five days open source and online book][IoT5days]</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;Maintainers</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;===========</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;The Zoul and derived platforms (as well as the Z1 mote) are maintained by Zolertia.</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;Main contributor: Antonio Lignan &lt;alinan@zolertia.com&gt; &lt;antonio.lignan@gmail.com&gt;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;[zolertia-site]: http://www.zolertia.io/products &quot;Zolertia&quot;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;[zolertia-wiki]: https://github.com/Zolertia/Resources/wiki &quot;Zolertia Wiki&quot;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;[cc1200]: http://www.ti.com/product/cc1200 &quot;CC1200&quot;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;[smart-rf-studio]: http://www.ti.com/tool/smartrftm-studio &quot;SmartRF Studio&quot;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;[smart-rf-flashprog]: http://www.ti.com/tool/flash-programmer &quot;SmartRF Flash Programmer&quot;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;[cc2538]: http://www.ti.com/product/cc2538     &quot;CC2538&quot;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;[uniflash]: http://processors.wiki.ti.com/index.php/Category:CCS_UniFlash &quot;UniFlash&quot;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;[pandoc]: http://johnmacfarlane.net/pandoc/ &quot;Pandoc - a universal document converter&quot;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;[hackster]: https://www.hackster.io/zolertia &quot;Zolertia Hackster Channel&quot;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;[zoul]: images/zoul-front.png &quot;Zolertia Zoul Module&quot;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;[zoul-pinout-front]: images/zoul-pinout-front.png &quot;Zoul pin-out (front)&quot;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;[zoul-pinout-back]: images/zoul-pinout-back.png &quot;Zoul pin-out (back)&quot;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;[IoT5days]: https://github.com/alignan/IPv6-WSN-book &quot;IoT in Five days online book&quot;</div></div><!-- fragment --></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.6-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Jun 10 2017 20:13:49 for Controller by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
