<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<title>Controller: E:/ISEL Projects/controller/contiki_multiple_interface/platform/stm32nucleo-spirit1/stm32cube-lib/drivers/STM32L1xx_HAL_Driver/Src/stm32l1xx_hal_comp.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Controller
   </div>
   <div id="projectbrief">IOT Project</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_579df2785fbf403aaa32c042e4089629.html">contiki_multiple_interface</a></li><li class="navelem"><a class="el" href="dir_206e9d4b2c9bc05aa0b079a803a973a3.html">platform</a></li><li class="navelem"><a class="el" href="dir_e2d39be6ca30b09e78cff250106b64f2.html">stm32nucleo-spirit1</a></li><li class="navelem"><a class="el" href="dir_4e23d31b5d0c9e819cbd42c59c7843b7.html">stm32cube-lib</a></li><li class="navelem"><a class="el" href="dir_7c6c8bd24154fb4cff906096cfdd7125.html">drivers</a></li><li class="navelem"><a class="el" href="dir_1cc1ee17e3d07d3161599902069ca75a.html">STM32L1xx_HAL_Driver</a></li><li class="navelem"><a class="el" href="dir_4fbb1c6347177ac0b20efc1d6ab8a8ad.html">Src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">stm32l1xx_hal_comp.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>COMP HAL module driver.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="stm32l1xx__hal_8h_source.html">stm32l1xx_hal.h</a>&quot;</code><br />
</div>
<p><a href="stm32l1xx__hal__comp_8c_source.html">Go to the source code of this file.</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>COMP HAL module driver. </p>
<dl class="section author"><dt>Author</dt><dd>MCD Application Team </dd></dl>
<dl class="section version"><dt>Version</dt><dd>V1.0.0 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>5-September-2014 This file provides firmware functions to manage the following functionalities of the COMP peripheral:<ul>
<li>Initialization and de-initialization functions</li>
<li>I/O operation functions</li>
<li>Peripheral Control functions</li>
<li>Peripheral State functions</li>
</ul>
</dd></dl>
<pre class="fragment">================================================================================
          ##### COMP Peripheral features #####
================================================================================
           
  [..]       
      The STM32L1xx device family integrates 2 analog comparators COMP1 and 
      COMP2:
      (#) The non inverting input and inverting input can be set to GPIO pins.
          Refer to "table1. COMP Inputs" below.
          HAL COMP driver configures the Routing Interface (RI) to connect the
          selected I/O pins to comparator input.
          Caution: Comparator COMP1 and ADC cannot be used at the same time as 
          ADC since they share the ADC switch matrix: COMP1 non-inverting 
          input is routed through ADC switch matrix. Except if ADC is intented 
          to measure voltage on COMP1 non-inverting input: it can be performed 
          on ADC channel VCOMP.

      (#) The COMP output is available using HAL_COMP_GetOutputLevel().

      (#) The COMP output can be redirected to embedded timers (TIM2, TIM3, 
          TIM4, TIM10).
          COMP output cannot be redirected to any I/O pin.
          Refer to "table 2. COMP Outputs redirection to embedded timers" below.

      (#) The comparators COMP1 and COMP2 can be combined in window mode. 
          In this mode, COMP2 non inverting input is used as common 
          non-inverting input.
  
      (#) The 2 comparators have interrupt capability with wake-up
          from Sleep and Stop modes (through the EXTI controller):
          (++) COMP1 is internally connected to EXTI Line 21
          (++) COMP2 is internally connected to EXTI Line 22

          From the corresponding IRQ handler, the right interrupt source can be
          retrieved with macro __HAL_COMP_EXTI_GET_FLAG(). Possible values are: 
          (++) COMP_EXTI_LINE_COMP1_EVENT
          (++) COMP_EXTI_LINE_COMP2_EVENT
  
      (#) The comparators also offer the possibility to ouput the voltage 
          reference (VrefInt), used on inverting inputs, on I/O pin through 
          a buffer. To use it, refer to macro "__HAL_VREFINT_OUT_ENABLE()".

            
[..] Table 1. COMP Inputs for the STM32L1xx devices
 +----------------------------------------------------------------------+
 |                 |                                |  COMP1  |  COMP2  |
 |-----------------|--------------------------------|---------|---------|
 |                 | 1/4 VREFINT                    |   --    |   OK    |
 |                 | 1/2 VREFINT                    |   --    |   OK    |
 |                 | 3/4 VREFINT                    |   --    |   OK    |
 | Inverting       | VREFINT                        |   OK    |   OK    |
 | input           | DAC Ch1 OUT (PA4)              |   --    |   OK    |
 |                 | DAC Ch2 OUT (PA5)              |   --    |   OK    |
 |                 | IO: PB3                        |   --    |   OK    |
 |-----------------|--------------------------------|---------|---------|
 |                 | IO:                            |         |         |
 |                 |   PB4, 5, 6*, 7*               |   ---   |   OK    |
 | Non-inverting   |   PA0*, 1*, 2*, 3*, 4, 5, 6, 7 |   OK    |   ---   |
 | input           |   PB0, 1, 12, 13, 14, 15       |   OK    |   ---   |
 |                 |   PC0, 1, 2, 3, 4, 5           |   OK    |   ---   |
 |                 |   PE7, 8, 9, 10                |   OK    |   ---   |
 |                 |   PF6, 7, 8, 9, 10             |   OK    |   ---   |
 |                 | OPAMP1 output                  |   OK    |   ---   |
 |                 | OPAMP2 output                  |   OK    |   ---   |
 |                 | OPAMP3 output**                |   OK    |   ---   |
 +----------------------------------------------------------------------+
 *: Available on devices category Cat.3, Cat.4, Cat.5 only. 
 **: Available on devices category Cat.4 only. 

 [..] Table 2. COMP Outputs redirection to embedded timers
 +-----------------------------------+     
 |      COMP1      |      COMP2      |
 |-----------------|-----------------|
 |                 |  TIM2 IC4       |
 |                 |  TIM2 OCREF CLR |
 | (no redirection |  TIM3 IC4       |
 |   to timers)    |  TIM3 OCREF CLR |
 |                 |  TIM4 IC4       |
 |                 |  TIM4 OCREF CLR |
 |                 |  TIM10 IC1      |
 +-----------------------------------+


            ##### How to use this driver #####
================================================================================
  [..]
      This driver provides functions to configure and program the Comparators of all STM32L1xx devices.

      To use the comparator, perform the following steps:
  
      (#)  Initialize the COMP low level resources by implementing the HAL_COMP_MspInit().
      (++) Configure the comparator input I/O pin using HAL_GPIO_Init():
           - For all inputs: I/O pin in analog mode (Schmitt trigger disabled)
           - Possible alternate configuration, for non-inverting inputs of comparator 2: I/O pin in floating mode (Schmitt trigger enabled).
           It is recommended to use analog configuration to avoid any overconsumption around VDD/2.
      (++) Enable COMP Peripheral clock using macro __COMP_CLK_ENABLE()
      (++) If required enable the COMP interrupt (EXTI line Interrupt): enable
           the comparator interrupt vector using HAL_NVIC_EnableIRQ(COMP_IRQn)
           and HAL_NVIC_SetPriority(COMP_IRQn, xxx, xxx) functions.
  
      (#) Configure the comparator using HAL_COMP_Init() function:
      (++) Select the inverting input (COMP2 only)
      (++) Select the non-inverting input
      (++) Select the output redirection to timers (COMP2 only)
      (++) Select the speed mode (COMP2 only)
      (++) Select the window mode (related to COMP1 and COMP2, but selected 
           by COMP2 only)
      (++) Select the pull-up/down resistors on non-inverting input (COMP1 only)

      (#) Enable the comparator using HAL_COMP_Start() or HAL_COMP_Start_IT() 
          function
    
      (#) If needed, use HAL_COMP_GetOutputLevel() or HAL_COMP_TriggerCallback()
          functions to manage comparator actions (output level or events)

      (#) Disable the comparator using HAL_COMP_Stop() or HAL_COMP_Stop_IT() 
          function

      (#) De-initialize the comparator using HAL_COMP_DeInit() function</pre><dl class="section attention"><dt>Attention</dt><dd></dd></dl>
<h2><center>&copy; COPYRIGHT(c) 2014 STMicroelectronics</center></h2>
<p>Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</p><ol type="1">
<li>Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</li>
<li>Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</li>
<li>Neither the name of STMicroelectronics nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</li>
</ol>
<p>THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. </p>

<p class="definition">Definition in file <a class="el" href="stm32l1xx__hal__comp_8c_source.html">stm32l1xx_hal_comp.c</a>.</p>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.6-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Jun 10 2017 20:07:30 for Controller by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
